const ods = {
    pregunta: [
        {
            texto: "¬øTu empresa apoya activamente a empresas lideradas por mujeres?",
            respuestas: [
                {
                    texto: "S√≠, nuestra empresa tiene pol√≠ticas y programas espec√≠ficos para apoyar a empresas lideradas por mujeres, promoviendo la igualdad de g√©nero.",
                    valor: "5"
                },
                {
                    texto: "Estamos en proceso de explorar formas de apoyar a empresas lideradas por mujeres, pero a√∫n no hemos implementado programas concretos al respecto.",
                    valor: "3"
                },
                {
                    texto: "No, nuestra empresa no tiene pol√≠ticas o programas espec√≠ficos para apoyar a empresas lideradas por mujeres en este momento.",
                    valor: "2"
                },
                {
                    texto: "No estoy seguro/a de la pol√≠tica de la empresa en este tema.",
                    valor: "0"
                }
           
            ]
        },
        {
            texto: "¬øTu empresa promueve la igualdad de oportunidades laborales para hombres y mujeres?",
            respuestas: [
                {
                    texto: "S√≠, existe una pol√≠tica clara de igualdad de oportunidades.",
                    valor: "5"
                },
                {
                    texto: "En su mayor√≠a, pero hay √°reas donde se podr√≠a mejorar.",
                    valor: "3"
                },
                {
                    texto: "No hay una pol√≠tica formal, pero se fomenta la igualdad de manera informal.",
                    valor: "2"
                },
                {
                    texto: "No, hay desigualdades evidentes en las oportunidades laborales.",
                    valor: "0"
                }
                
            ]
        },
        {
            texto: "¬øQu√© medidas implement√°is para promover la igualdad de g√©nero en las reuniones, eventos y charlas empresariales?",
            respuestas: [
                {
                    texto: "Proporcionamos la participaci√≥n en igualdad de g√©nero a todo el personal.",
                    valor: "5"
                },
                {
                    texto: "Promovemos la participaci√≥n equitativa de hombres y mujeres en ciertas reuniones y charlas.",
                    valor: "2"
                },
                {
                    texto: "Se hace la exclusi√≥n de cierta parte del personal, debido a su g√©nero, en todas las reuniones y charlas.",
                    valor: "2"
                },
                {
                    texto: "No tomamos medidas espec√≠ficas.",
                    valor: "0"
                }
                
            ]
        },
        {
            texto: "¬øRealizan charlas y conferencias para asegurar la eliminaci√≥n de estereotipos de g√©nero en el desarrollo diario de las actividades de vuestra empresa?",
            respuestas: [
                {
                    texto: "No realizamos charlas o conferencias para asegurar la eliminaci√≥n de estereotipos de g√©nero.",
                    valor: "0"
                },
                {
                    texto: "No realizamos charlas o conferencias para asegurar la eliminaci√≥n de estereotipos de g√©nero. Pero tenemos pensado hacerlas en un periodo corto de tiempo. Acortar el periodo de tiempo lo m√°ximo posible.",
                    valor: "2"
                },
                {
                    texto: "Realizamos una charla o conferencia al a√±o para asegurar la eliminaci√≥n de estereotipos de g√©nero.",
                    valor: "3"
                },
                {
                    texto: "Realizamos m√°s de una charla o conferencia al a√±o para asegurar la eliminaci√≥n de estereotipos de g√©nero.",
                    valor: "5"
                }
                
            ]
        }
    ]
    ,
    recomendaciones: [
        { texto: "1. Establecer pol√≠ticas y programas de mentor√≠a o capacitaci√≥n para mujeres l√≠deres en tu industria como parte de tu compromiso con la igualdad de g√©nero y el apoyo a empresas lideradas por mujeres." },
        { texto: "1. Elaborar un estudio a la hora de contratar los servicios de las empresas colaboradoras para saber su compromiso con la igualdad de g√©nero." },
        { texto: "1. Apoyar y promocionar iniciativas locales que busquen empoderar a las mujeres." },
        { texto: "1. Colaborar con organizaciones no lucrativas que trabajan en la promoci√≥n de la igualdad de g√©nero." },
        { texto: "2. Establecer pol√≠ticas de contrataci√≥n basadas en m√©ritos y ofrecer flexibilidad en la jornada laboral." },
        { texto: "2. Realizar charlas para la sensibilizaci√≥n sobre la igualdad de g√©nero en el entorno laboral." },
        { texto: "2. Elaborar medidas de conciliaci√≥n laboral y familiar." },
        { texto: "2. Crear un proceso de evaluaci√≥n regular sobre el clima laboral para abordar posibles desigualdades de g√©nero." },
        { texto: "3. Establecer normativas claras sobre el lenguaje utilizado en espacios de trabajo y en reuniones y aplicar un sistema de sanciones en caso de uso de mensajes discriminatorios." },
        { texto: "3. Proporcionar a los trabajadores formaciones y talleres de sensibilizaci√≥n sobre la importancia de un lenguaje no sexista." },
        { texto: "4. Proporcionar programas de capacitaci√≥n para empleados en temas de g√©nero, diversidad e inclusi√≥n." },
        { texto: "4. Establecer un canal de denuncias seguro y confidencial para abordar problemas de discriminaci√≥n." },
        { texto: "5. Establecer un seguimiento mensual para comprobar que los trabajadores que tengan contacto con clientes tengan un lenguaje adecuado, formal e igualitario para todos los g√©neros. La evaluaci√≥n ser√° realizada por los compa√±eros y el seguimiento de estas evaluaciones ser√° llevado a cabo por un responsable del departamento de Recursos Humanos. El resultado ser√° analizado y devuelto al trabajador evaluado con √°reas de mejora." },
        { texto: "6. Adoptar programas de b√∫squeda activa de talento femenino." },
        { texto: "6. Activar la promoci√≥n y desarrollo de mujeres cualificadas a puestos directivos, incluyendo mentor√≠a y coaching, para ayudarlas a adquirir las habilidades necesarias para ascender a puestos directivos." },
        { texto: "6. Incluir a las mujeres en la participaci√≥n de conferencias, la nominaci√≥n para premios y la promoci√≥n de su trabajo a trav√©s de diversos canales de comunicaci√≥n." },
        { texto: "6. Llegar a la proporci√≥n de un 50% de mujeres en los puestos directivos en un periodo de 3 a√±os." },
        { texto: "7. Analizar datos internos de contrataci√≥n para identificar brechas de g√©nero y comprender las razones detr√°s de ellas." },
        { texto: "7. Establecer m√©tricas claras y objetivos relacionados con la contrataci√≥n y promoci√≥n de mujeres, realizando un seguimiento regular del progreso." },
        { texto: "8,9,10. Realizar encuestas con el personal para comprender sus percepciones y experiencias relacionadas con la distribuci√≥n de g√©nero en la asignaci√≥n de roles y responsabilidades." },
        { texto: "8,9,10. 1 d√≠a al mes, el trabajador o trabajadora de un departamento sesgado por g√©nero explica y ense√±a sus trabajos a otro trabajador o trabajadora de otro departamento." },
        { texto: "12. Team Buildings sobre desigualdad." },
        { texto: "10,11. Intentar utilizar palabras neutras que no indiquen el g√©nero (excepto si ya lo conocemos)." },
        { texto: "13. La base de la publicidad es la empat√≠a." },
        { texto: "8,9,10. En los protocolos de atenci√≥n al cliente incluir: No se deben hacer afirmaciones o suposiciones que impliquen una distribuci√≥n de roles por raz√≥n de g√©nero: no hay que presuponer que la persona titular es un hombre, o que la persona pagadora es un hombre, o que la persona socia es un hombre, o que quien toma las decisiones (en el hogar) es un hombre." },
        { texto: "14. Realizar mediante empresas externas diagn√≥sticos de situaci√≥n en materia de igualdad anual bianualmente." },
        { texto: "15. Realiza una pol√≠tica inclusiva que fomente la participaci√≥n activa de los hombres en el cuidado y la crianza de sus hijos, dando la posibilidad de trabajar desde casa a las mujeres y hombres hasta que el beb√© cumpla 1 a√±o. Pasado este tiempo, y hasta los dos a√±os de edad, los trabajadores y las trabajadoras tendr√°n la posibilidad de adoptar un esquema h√≠brido con hasta 2 d√≠as de trabajo desde casa." },
        { texto: "16. Realizar un manual de lenguaje no sexista que cualquier empleado o empleada podr√° utilizar." },
        { texto: "17. Realiza sesiones de evaluaci√≥n de las necesidades y preocupaciones de los empleados relacionados con la conciliaci√≥n laboral y personal. Investiga qu√© pol√≠ticas y pr√°cticas se han podido aplicar en otras empresas similares a la tuya, y aprende de sus experiencias." },
        { texto: "18. Recomendar√≠a realizar sesiones de formaci√≥n, evaluaci√≥n de riesgos, recursos de apoyo y seguimiento continuo para adoptar el protocolo de prevenci√≥n de riesgos psicosociales en la empresa." },
        { texto: "19. Ser√≠a recomendable establecer un sistema de denuncias an√≥nimas y confidenciales, con accesibilidad para todo el mundo. Esto puede ser una soluci√≥n efectiva para fomentar la comunicaci√≥n y abordar las preocupaciones relacionadas con la integridad f√≠sica o ps√≠quica del personal." },
        { texto: "20. Concienciar a los trabajadores sobre la importancia y eficacia en la gesti√≥n de los canales de denuncia y la gran utilidad que pueden tener para solucionar posibles problemas en la empresa." },
        { texto: "20. Implementar nuevas estrategias de mejora para los canales de denuncia para que su estructura sea sencilla para los trabajadores." },
        { texto: "20. Organizar charlas informativas para dar a conocer la importancia de los canales de denuncia y los beneficios que pueden aportar tener un buen ambiente laboral." },
        { texto: "21. Organizar charlas sobre la importancia de la salud mental y bienestar a tus empleados." },
        { texto: "21. Realizar encuestas de bienestar para recopilar la informaci√≥n necesaria para conocer los temas de bienestar y salud mental que preocupan a tus empleados." },
        { texto: "21. Realiza alianzas con alg√∫n gabinete de psicolog√≠a para que tus empleados puedan asistir en sesiones de evaluaci√≥n y apoyo psicol√≥gico." },
        { texto: "17, 22. Establecer un servicio de guarder√≠a para empleados, dada la demanda potencial para mejorar el equilibrio entre trabajo y vida personal. Explorar convenios con guarder√≠as cercanas podr√≠a ser una alternativa viable para ofrecer este apoyo sin gestionar una instalaci√≥n interna, lo que podr√≠a contribuir a la satisfacci√≥n y retenci√≥n de empleados." },
        { texto: "23. Implantar pol√≠ticas formales de igualdad de g√©nero que incluyan la eliminaci√≥n de las diferencias salariales que puedan existir en un mismo puesto de trabajo entre los distintos g√©neros, empezando con una investigaci√≥n en los salarios de mujeres y hombres en roles parecidos y comprobar que no exista ninguna distinci√≥n." },
        { texto: "24. En caso de no saber qu√© significa el t√©rmino 'techo de cristal', se debe asignar un tiempo para que se investigue y se eduque sobre ello. Define metas espec√≠ficas relacionadas con la equidad de g√©nero y el avance profesional de las mujeres en tu organizaci√≥n. Establece m√©tricas para medir el progreso hacia esos objetivos y revisa regularmente los resultados. Ofrece programas de desarrollo profesional y capacitaci√≥n de liderazgo para mujeres empleadas que les ayude a avanzar en sus carreras y optar por esos roles." },
        { texto: "25. A la hora de iniciar un proceso de despidos, deber√≠an tener en cuenta que la habilidad y competencia de una persona no est√° determinada por su g√©nero." },
        { texto: "26. Dar a conocer a los trabajadores de la empresa la importancia que puede tener la elecci√≥n de proveedores en funci√≥n de si tiene en cuenta la igualdad de g√©nero, para poder respaldar de manera activa las pr√°cticas inclusivas y mejorar en la construcci√≥n de un entorno laboral m√°s equitativo." },
        { texto: "27. Puedes establecer un canal de denuncias confidencial y accesible para que los empleados puedan informar sobre cualquier incidente de acoso de g√©nero de manera segura, siempre actuando de manera r√°pida y adecuada." },
        { texto: "28. La flexibilidad horaria laboral es necesaria para que madres y padres puedan participar por igual en las labores del hogar y en la atenci√≥n de sus hijos. As√≠ se contribuye a la equidad de g√©nero y a la igualdad de oportunidades. Los trabajadores y trabajadoras de tu empresa pueden realizar el horario de ocho horas en la franja horaria que les ayude en la conciliaci√≥n familiar y laboral, pero consensuado y aprobado por su responsable directo." },
        { texto: "29. Para asegurarte de que en la contrataci√≥n de los nuevos trabajadores no tienen en cuenta el g√©nero, puedes revisar las pol√≠ticas de contrataci√≥n que disponen tus empleados responsables en esa funci√≥n y comprobar que los criterios est√©n solamente basados en las habilidades, experiencia y competencias relacionadas con el puesto de trabajo." },
        { texto: "30. Reflexiona sobre el hecho de que ninguna norma deber√≠a buscar la discriminaci√≥n positiva ni promover la existencia de cuotas, poniendo por delante el que impere la meritocracia a nivel profesional." }
    ]
    
    ,
    relaciones:[
     /*1 */ [0, 1, 2, 3],
     /*2 */ [4, 5, 6, 7],
     /*3 */ [8, 9],
     /*4 */ [10, 11],
     /*5 */ [12],
     /*6 */ [13, 14, 15, 16],
     /*7 */ [17,18],
     /*8 */ [19,20,24],
     /*9 */ [19,20,24],
     /*10*/ [19,20, 22,24],
     /*11*/ [22],
     /*12*/ [21],
     /*13*/ [23],
     /*14*/ [25],
     /*15*/ [26],
     /*16*/ [27],
     /*17*/ [28,37],
     /*18*/ [29],
     /*19*/ [30],
     /*20*/ [31,32,33],
     /*21*/ [34,35,36],
     /*22*/ [37],
     /*23*/ [38],
     /*24*/ [39],
     /*25*/ [40],
     /*26*/ [41],
     /*27*/ [42],
     /*28*/ [43],
     /*29*/ [44],
     /*30*/ [45],
    ]
};

let respuestas = []; /* Respuesta del usuario */
let notapregunta = []; /* Nota de la pregunta marcada */
var preguntaactual = 0; /* Variable para la pregunta mostrada */
var nota = 0; /* Variable para la nota final */

    function crearpreguntas() {
    var div = document.getElementById("div");
    var divinterior = document.createElement("div");
    divinterior.classList.add("divinterior");
    divinterior.id = "divinterior";
    div.appendChild(divinterior);

    for (var i = 0; i < ods.pregunta.length; i++) {
        var divpregunta = document.createElement("div");
        divpregunta.id = i;
        divpregunta.classList.add("divpregunta");
        divinterior.appendChild(divpregunta);

        var enunciadopregunta = document.createElement("h1");
        enunciadopregunta.id = "enunciadopregunta";
        divpregunta.appendChild(enunciadopregunta);
        enunciadopregunta.textContent = i + 1 + ". " + ods.pregunta[i].texto;

        var formulario = document.createElement("form");
        formulario.id = "formulario" + i;
        formulario.onsubmit = function (event) {
            event.preventDefault();
            var valorSeleccionado = obtenerValorSeleccionado(i);
            respuesta(i, valorSeleccionado);
        };
        const letras = ["A) ", "B) ", "C) ", "D) "];
        for (var respuestaIndex = 0; respuestaIndex < ods.pregunta[i].respuestas.length; respuestaIndex++) {
            var br = document.createElement("br");
            var divresupuesta = document.createElement("div");
            divresupuesta.id = "divrespuesta" + respuestaIndex;
            divresupuesta.classList.add("divrespuesta");

            var input = document.createElement("input");
            input.type = "radio";
            input.name = "pregunta" + i;
            input.value = ods.pregunta[i].respuestas[respuestaIndex].valor;
            var label = document.createElement("label");
            label.textContent = letras[respuestaIndex] + ods.pregunta[i].respuestas[respuestaIndex].texto + " ////////////" + ods.pregunta[i].respuestas[respuestaIndex].valor;

            divresupuesta.addEventListener("click", function (event) {/* Para poder marcar el input clicando en el div */
                var input = event.currentTarget.querySelector('input[type="radio"]');
                if (input) {
                    input.checked = !input.checked;
                    var valorSeleccionado = obtenerValorSeleccionado(i);
                    respuesta(i, valorSeleccionado);
                }
            });

            divresupuesta.appendChild(input);
            divresupuesta.appendChild(label);
            formulario.appendChild(divresupuesta);
            formulario.appendChild(br);
        }

        divpregunta.appendChild(formulario);
    }
    iniciar();
}

    function iniciar() {
    for (var e = 0; e < ods.pregunta.length; e++) {
        ocultar(e);
    }
}

    function ocultar(divocultar) {
    var div = document.getElementById(divocultar);
    div.classList.add("preguntaoculta");
}

    function mostrar(divocultar) {
    var div = document.getElementById(divocultar);
    div.classList.remove("preguntaoculta");

    if (divocultar == "0") {
        izquierda = document.getElementById("izquierda");
        izquierda.classList.add("ocultarboton");
        botonfinalizar = document.getElementById("botonfinalizar");
        botonfinalizar.classList.add("ocultarbotonfinalizar");
    } else if (divocultar == ods.pregunta.length - 1) {
        derecha = document.getElementById("derecha");
        derecha.classList.add("ocultarboton");
        botonfinalizar = document.getElementById("botonfinalizar");
        botonfinalizar.classList.remove("ocultarbotonfinalizar");
    } else {
        izquierda = document.getElementById("izquierda");
        izquierda.classList.remove("ocultarboton");
        derecha = document.getElementById("derecha");
        derecha.classList.remove("ocultarboton");
        botonfinalizar = document.getElementById("botonfinalizar");
        botonfinalizar.classList.add("ocultarbotonfinalizar");
    }
}

    function anterior() {
    transicionocultar();
    setTimeout(function () {
        ocultar(preguntaactual);
        mostrar(preguntaactual - 1)
        preguntaactual--;
    }, 300);
}

    function siguiente() {
    transicionocultar();
    setTimeout(function () {
        ocultar(preguntaactual);
        mostrar(preguntaactual + 1)
        preguntaactual++;
    }, 300);
    obtenerValorSeleccionado(preguntaactual);
}


    function respuesta(pregunta, elegida) {
    respuestas[pregunta] = parseInt(elegida, 10);
}

    function obtenerValorSeleccionado(preguntaIndex) {
    var idFormulario = "formulario" + preguntaIndex;
    var formulario = document.getElementById(idFormulario);
    var opcionesSeleccionadas = formulario.querySelectorAll('input[type="radio"]:checked');

    if (opcionesSeleccionadas.length > 0) {
        var indiceSeleccionado = Array.from(formulario.elements).indexOf(opcionesSeleccionadas[0]);
        respuesta(preguntaIndex, indiceSeleccionado);
    }
}


    function finalizar(){
    obtenerValorSeleccionado(preguntaactual);
    var cajapreguntas = document.getElementById("cajapreguntas");
    cajapreguntas.style.opacity = 0;
    calcularnota();
    
    setTimeout(function () {
        window.scrollTo(0, 0);}, 500);

}

    function calcularnota() {
    for (var i = 0; i < respuestas.length; i++) {
        if (respuestas[i] !== undefined) {
            var opcionseleccionada = respuestas[i];
            nota += parseInt(ods.pregunta[i].respuestas[opcionseleccionada].valor);
            notapregunta[i] = parseInt(ods.pregunta[i].respuestas[opcionseleccionada].valor); //Guardamos la puntuaci√≥n de cada pregunta para seg√∫n el valor mostrar o no la recomendaci√≥n
        }
    }

    var valor = document.getElementById("nota");
    var puntuacion = document.getElementById("puntuacion");
    valor.textContent = "Tu puntuaci√≥n ha sido de " + nota + " / " + (ods.pregunta.length * 5);

    var palabra;
    if (nota < 75) {
        palabra = "MAL, ESPABILA, üò§";
    } else if (nota <= 100) {
        palabra = "MEJORABLE, CONFIAMOS EN TI, üò¢";
    } else if (nota <= 139) {
        palabra = "POR EL BUEN CAMINO, SIGA TRABAJANDO EN ELLO, üëç";
    } else if (nota <= 150) {
        palabra = "EXCELENTE, SIGUE AS√ç, ‚≠ê";
    }

    
    var mostrarpalabra = document.getElementById("palabra");
    mostrarpalabra.textContent = palabra;
    for(i = 0 ; i < ods.pregunta.length ; i++){
        if (notapregunta[i] != 5){
        consejo(i + 1);
    }
    }

    puntuacion.style.display = "block";
    setTimeout(function () {
        puntuacion.style.opacity = 1;
    }, 1000);
}

    function consejo(pregunta) {
    var divconsejo = document.getElementById("divconsejo");
    var div = document.createElement("div");
    var titulo = document.createElement("h1");
    div.appendChild(titulo);
    titulo.textContent = "Consejo para la pregunta " + pregunta;
    div.id = "DIVCONSEJO";
        for ( e = 0; e < ods.relaciones[pregunta].length ; e ++){/* Bucle para cada pregunta */
            var h3 = document.createElement("h3");
            divconsejo.appendChild(div);
            div.appendChild(h3);

       var quemostrar = ods.relaciones[pregunta - 2][e]
        var mostrar = ods.recomendaciones[quemostrar].texto;
        h3.textContent = mostrar;
        }
    }

    function transicionocultar() {
        var div = document.getElementById("divinterior");
        div.style.opacity = 0;
    
        setTimeout(function () {
            div.style.opacity = 1;
        }, 350);
    }


    function ModoOscuro(interruptor) {
        if (interruptor.target.checked) {
            document.body.classList.add('dark-mode');
        } else {
            document.body.classList.remove('dark-mode');
        }
    }


    crearpreguntas(); /* Arrancamos el formulario */
    mostrar(preguntaactual);
    const InterruptorOscuro = document.querySelector('#modoOscuro');
    InterruptorOscuro.addEventListener('change', ModoOscuro);
    