const ods = {
    pregunta: [
        {
            texto: "¿Tu empresa apoya activamente a empresas lideradas por mujeres?",
            respuestas: [
                {
                    texto: "Sí, nuestra empresa tiene políticas y programas específicos para apoyar a empresas lideradas por mujeres, promoviendo la igualdad de género.",
                    valor: "5"
                },
                {
                    texto: "Estamos en proceso de explorar formas de apoyar a empresas lideradas por mujeres, pero aún no hemos implementado programas concretos al respecto.",
                    valor: "3"
                },
                {
                    texto: "No, nuestra empresa no tiene políticas o programas específicos para apoyar a empresas lideradas por mujeres en este momento.",
                    valor: "2"
                },
                {
                    texto: "No estoy seguro/a de la política de la empresa en este tema.",
                    valor: "0"
                }
           
            ]
        },
        {
            texto: "¿Tu empresa promueve la igualdad de oportunidades laborales para hombres y mujeres?",
            respuestas: [
                {
                    texto: "Sí, existe una política clara de igualdad de oportunidades.",
                    valor: "5"
                },
                {
                    texto: "En su mayoría, pero hay áreas donde se podría mejorar.",
                    valor: "3"
                },
                {
                    texto: "No hay una política formal, pero se fomenta la igualdad de manera informal.",
                    valor: "2"
                },
                {
                    texto: "No, hay desigualdades evidentes en las oportunidades laborales.",
                    valor: "0"
                }
                
            ]
        },
        {
            texto: "¿Qué medidas implementáis para promover la igualdad de género en las reuniones, eventos y charlas empresariales?",
            respuestas: [
                {
                    texto: "Proporcionamos la participación en igualdad de género a todo el personal.",
                    valor: "5"
                },
                {
                    texto: "Promovemos la participación equitativa de hombres y mujeres en ciertas reuniones y charlas.",
                    valor: "2"
                },
                {
                    texto: "Se hace la exclusión de cierta parte del personal, debido a su género, en todas las reuniones y charlas.",
                    valor: "2"
                },
                {
                    texto: "No tomamos medidas específicas.",
                    valor: "0"
                }
                
            ]
        },
        {
            texto: "¿Realizan charlas y conferencias para asegurar la eliminación de estereotipos de género en el desarrollo diario de las actividades de vuestra empresa?",
            respuestas: [
                {
                    texto: "No realizamos charlas o conferencias para asegurar la eliminación de estereotipos de género.",
                    valor: "0"
                },
                {
                    texto: "No realizamos charlas o conferencias para asegurar la eliminación de estereotipos de género. Pero tenemos pensado hacerlas en un periodo corto de tiempo. Acortar el periodo de tiempo lo máximo posible.",
                    valor: "2"
                },
                {
                    texto: "Realizamos una charla o conferencia al año para asegurar la eliminación de estereotipos de género.",
                    valor: "3"
                },
                {
                    texto: "Realizamos más de una charla o conferencia al año para asegurar la eliminación de estereotipos de género.",
                    valor: "5"
                }
                
            ]
        }
    ]
    ,
    recomendaciones: [
        { texto: "1. Establecer políticas y programas de mentoría o capacitación para mujeres líderes en tu industria como parte de tu compromiso con la igualdad de género y el apoyo a empresas lideradas por mujeres." },
        { texto: "1. Elaborar un estudio a la hora de contratar los servicios de las empresas colaboradoras para saber su compromiso con la igualdad de género." },
        { texto: "1. Apoyar y promocionar iniciativas locales que busquen empoderar a las mujeres." },
        { texto: "1. Colaborar con organizaciones no lucrativas que trabajan en la promoción de la igualdad de género." },
        { texto: "2. Establecer políticas de contratación basadas en méritos y ofrecer flexibilidad en la jornada laboral." },
        { texto: "2. Realizar charlas para la sensibilización sobre la igualdad de género en el entorno laboral." },
        { texto: "2. Elaborar medidas de conciliación laboral y familiar." },
        { texto: "2. Crear un proceso de evaluación regular sobre el clima laboral para abordar posibles desigualdades de género." },
        { texto: "3. Establecer normativas claras sobre el lenguaje utilizado en espacios de trabajo y en reuniones y aplicar un sistema de sanciones en caso de uso de mensajes discriminatorios." },
        { texto: "3. Proporcionar a los trabajadores formaciones y talleres de sensibilización sobre la importancia de un lenguaje no sexista." },
        { texto: "4. Proporcionar programas de capacitación para empleados en temas de género, diversidad e inclusión." },
        { texto: "4. Establecer un canal de denuncias seguro y confidencial para abordar problemas de discriminación." },
        { texto: "5. Establecer un seguimiento mensual para comprobar que los trabajadores que tengan contacto con clientes tengan un lenguaje adecuado, formal e igualitario para todos los géneros. La evaluación será realizada por los compañeros y el seguimiento de estas evaluaciones será llevado a cabo por un responsable del departamento de Recursos Humanos. El resultado será analizado y devuelto al trabajador evaluado con áreas de mejora." },
        { texto: "6. Adoptar programas de búsqueda activa de talento femenino." },
        { texto: "6. Activar la promoción y desarrollo de mujeres cualificadas a puestos directivos, incluyendo mentoría y coaching, para ayudarlas a adquirir las habilidades necesarias para ascender a puestos directivos." },
        { texto: "6. Incluir a las mujeres en la participación de conferencias, la nominación para premios y la promoción de su trabajo a través de diversos canales de comunicación." },
        { texto: "6. Llegar a la proporción de un 50% de mujeres en los puestos directivos en un periodo de 3 años." },
        { texto: "7. Analizar datos internos de contratación para identificar brechas de género y comprender las razones detrás de ellas." },
        { texto: "7. Establecer métricas claras y objetivos relacionados con la contratación y promoción de mujeres, realizando un seguimiento regular del progreso." },
        { texto: "8,9,10. Realizar encuestas con el personal para comprender sus percepciones y experiencias relacionadas con la distribución de género en la asignación de roles y responsabilidades." },
        { texto: "8,9,10. 1 día al mes, el trabajador o trabajadora de un departamento sesgado por género explica y enseña sus trabajos a otro trabajador o trabajadora de otro departamento." },
        { texto: "12. Team Buildings sobre desigualdad." },
        { texto: "10,11. Intentar utilizar palabras neutras que no indiquen el género (excepto si ya lo conocemos)." },
        { texto: "13. La base de la publicidad es la empatía." },
        { texto: "8,9,10. En los protocolos de atención al cliente incluir: No se deben hacer afirmaciones o suposiciones que impliquen una distribución de roles por razón de género: no hay que presuponer que la persona titular es un hombre, o que la persona pagadora es un hombre, o que la persona socia es un hombre, o que quien toma las decisiones (en el hogar) es un hombre." },
        { texto: "14. Realizar mediante empresas externas diagnósticos de situación en materia de igualdad anual bianualmente." },
        { texto: "15. Realiza una política inclusiva que fomente la participación activa de los hombres en el cuidado y la crianza de sus hijos, dando la posibilidad de trabajar desde casa a las mujeres y hombres hasta que el bebé cumpla 1 año. Pasado este tiempo, y hasta los dos años de edad, los trabajadores y las trabajadoras tendrán la posibilidad de adoptar un esquema híbrido con hasta 2 días de trabajo desde casa." },
        { texto: "16. Realizar un manual de lenguaje no sexista que cualquier empleado o empleada podrá utilizar." },
        { texto: "17. Realiza sesiones de evaluación de las necesidades y preocupaciones de los empleados relacionados con la conciliación laboral y personal. Investiga qué políticas y prácticas se han podido aplicar en otras empresas similares a la tuya, y aprende de sus experiencias." },
        { texto: "18. Recomendaría realizar sesiones de formación, evaluación de riesgos, recursos de apoyo y seguimiento continuo para adoptar el protocolo de prevención de riesgos psicosociales en la empresa." },
        { texto: "19. Sería recomendable establecer un sistema de denuncias anónimas y confidenciales, con accesibilidad para todo el mundo. Esto puede ser una solución efectiva para fomentar la comunicación y abordar las preocupaciones relacionadas con la integridad física o psíquica del personal." },
        { texto: "20. Concienciar a los trabajadores sobre la importancia y eficacia en la gestión de los canales de denuncia y la gran utilidad que pueden tener para solucionar posibles problemas en la empresa." },
        { texto: "20. Implementar nuevas estrategias de mejora para los canales de denuncia para que su estructura sea sencilla para los trabajadores." },
        { texto: "20. Organizar charlas informativas para dar a conocer la importancia de los canales de denuncia y los beneficios que pueden aportar tener un buen ambiente laboral." },
        { texto: "21. Organizar charlas sobre la importancia de la salud mental y bienestar a tus empleados." },
        { texto: "21. Realizar encuestas de bienestar para recopilar la información necesaria para conocer los temas de bienestar y salud mental que preocupan a tus empleados." },
        { texto: "21. Realiza alianzas con algún gabinete de psicología para que tus empleados puedan asistir en sesiones de evaluación y apoyo psicológico." },
        { texto: "17, 22. Establecer un servicio de guardería para empleados, dada la demanda potencial para mejorar el equilibrio entre trabajo y vida personal. Explorar convenios con guarderías cercanas podría ser una alternativa viable para ofrecer este apoyo sin gestionar una instalación interna, lo que podría contribuir a la satisfacción y retención de empleados." },
        { texto: "23. Implantar políticas formales de igualdad de género que incluyan la eliminación de las diferencias salariales que puedan existir en un mismo puesto de trabajo entre los distintos géneros, empezando con una investigación en los salarios de mujeres y hombres en roles parecidos y comprobar que no exista ninguna distinción." },
        { texto: "24. En caso de no saber qué significa el término 'techo de cristal', se debe asignar un tiempo para que se investigue y se eduque sobre ello. Define metas específicas relacionadas con la equidad de género y el avance profesional de las mujeres en tu organización. Establece métricas para medir el progreso hacia esos objetivos y revisa regularmente los resultados. Ofrece programas de desarrollo profesional y capacitación de liderazgo para mujeres empleadas que les ayude a avanzar en sus carreras y optar por esos roles." },
        { texto: "25. A la hora de iniciar un proceso de despidos, deberían tener en cuenta que la habilidad y competencia de una persona no está determinada por su género." },
        { texto: "26. Dar a conocer a los trabajadores de la empresa la importancia que puede tener la elección de proveedores en función de si tiene en cuenta la igualdad de género, para poder respaldar de manera activa las prácticas inclusivas y mejorar en la construcción de un entorno laboral más equitativo." },
        { texto: "27. Puedes establecer un canal de denuncias confidencial y accesible para que los empleados puedan informar sobre cualquier incidente de acoso de género de manera segura, siempre actuando de manera rápida y adecuada." },
        { texto: "28. La flexibilidad horaria laboral es necesaria para que madres y padres puedan participar por igual en las labores del hogar y en la atención de sus hijos. Así se contribuye a la equidad de género y a la igualdad de oportunidades. Los trabajadores y trabajadoras de tu empresa pueden realizar el horario de ocho horas en la franja horaria que les ayude en la conciliación familiar y laboral, pero consensuado y aprobado por su responsable directo." },
        { texto: "29. Para asegurarte de que en la contratación de los nuevos trabajadores no tienen en cuenta el género, puedes revisar las políticas de contratación que disponen tus empleados responsables en esa función y comprobar que los criterios estén solamente basados en las habilidades, experiencia y competencias relacionadas con el puesto de trabajo." },
        { texto: "30. Reflexiona sobre el hecho de que ninguna norma debería buscar la discriminación positiva ni promover la existencia de cuotas, poniendo por delante el que impere la meritocracia a nivel profesional." }
    ]
    
    ,
    relaciones:[
     /*1 */ [0, 1, 2, 3],
     /*2 */ [4, 5, 6, 7],
     /*3 */ [8, 9],
     /*4 */ [10, 11],
     /*5 */ [12],
     /*6 */ [13, 14, 15, 16],
     /*7 */ [17,18],
     /*8 */ [19,20,24],
     /*9 */ [19,20,24],
     /*10*/ [19,20, 22,24],
     /*11*/ [22],
     /*12*/ [21],
     /*13*/ [23],
     /*14*/ [25],
     /*15*/ [26],
     /*16*/ [27],
     /*17*/ [28,37],
     /*18*/ [29],
     /*19*/ [30],
     /*20*/ [31,32,33],
     /*21*/ [34,35,36],
     /*22*/ [37],
     /*23*/ [38],
     /*24*/ [39],
     /*25*/ [40],
     /*26*/ [41],
     /*27*/ [42],
     /*28*/ [43],
     /*29*/ [44],
     /*30*/ [45],
    ]
};

let respuestas = []; /* Respuesta del usuario */
let notapregunta = []; /* Nota de la pregunta marcada */
var preguntaactual = 0; /* Variable para la pregunta mostrada */
var nota = 0; /* Variable para la nota final */

    function crearpreguntas() {
    var div = document.getElementById("div");
    var divinterior = document.createElement("div");
    divinterior.classList.add("divinterior");
    divinterior.id = "divinterior";
    div.appendChild(divinterior);

    for (var i = 0; i < ods.pregunta.length; i++) {
        var divpregunta = document.createElement("div");
        divpregunta.id = i;
        divpregunta.classList.add("divpregunta");
        divinterior.appendChild(divpregunta);

        var enunciadopregunta = document.createElement("h1");
        enunciadopregunta.id = "enunciadopregunta";
        divpregunta.appendChild(enunciadopregunta);
        enunciadopregunta.textContent = i + 1 + ". " + ods.pregunta[i].texto;

        var formulario = document.createElement("form");
        formulario.id = "formulario" + i;
        formulario.onsubmit = function (event) {
            event.preventDefault();
            var valorSeleccionado = obtenerValorSeleccionado(i);
            respuesta(i, valorSeleccionado);
        };
        const letras = ["A) ", "B) ", "C) ", "D) "];
        for (var respuestaIndex = 0; respuestaIndex < ods.pregunta[i].respuestas.length; respuestaIndex++) {
            var br = document.createElement("br");
            var divresupuesta = document.createElement("div");
            divresupuesta.id = "divrespuesta" + respuestaIndex;
            divresupuesta.classList.add("divrespuesta");

            var input = document.createElement("input");
            input.type = "radio";
            input.name = "pregunta" + i;
            input.value = ods.pregunta[i].respuestas[respuestaIndex].valor;
            var label = document.createElement("label");
            label.textContent = letras[respuestaIndex] + ods.pregunta[i].respuestas[respuestaIndex].texto + " ////////////" + ods.pregunta[i].respuestas[respuestaIndex].valor;

            divresupuesta.addEventListener("click", function (event) {/* Para poder marcar el input clicando en el div */
                var input = event.currentTarget.querySelector('input[type="radio"]');
                if (input) {
                    input.checked = !input.checked;
                    var valorSeleccionado = obtenerValorSeleccionado(i);
                    respuesta(i, valorSeleccionado);
                }
            });

            divresupuesta.appendChild(input);
            divresupuesta.appendChild(label);
            formulario.appendChild(divresupuesta);
            formulario.appendChild(br);
        }

        divpregunta.appendChild(formulario);
    }
    iniciar();
}

    function iniciar() {
    for (var e = 0; e < ods.pregunta.length; e++) {
        ocultar(e);
    }
}

    function ocultar(divocultar) {
    var div = document.getElementById(divocultar);
    div.classList.add("preguntaoculta");
}

    function mostrar(divocultar) {
    var div = document.getElementById(divocultar);
    div.classList.remove("preguntaoculta");

    if (divocultar == "0") {
        izquierda = document.getElementById("izquierda");
        izquierda.classList.add("ocultarboton");
        botonfinalizar = document.getElementById("botonfinalizar");
        botonfinalizar.classList.add("ocultarbotonfinalizar");
    } else if (divocultar == ods.pregunta.length - 1) {
        derecha = document.getElementById("derecha");
        derecha.classList.add("ocultarboton");
        botonfinalizar = document.getElementById("botonfinalizar");
        botonfinalizar.classList.remove("ocultarbotonfinalizar");
    } else {
        izquierda = document.getElementById("izquierda");
        izquierda.classList.remove("ocultarboton");
        derecha = document.getElementById("derecha");
        derecha.classList.remove("ocultarboton");
        botonfinalizar = document.getElementById("botonfinalizar");
        botonfinalizar.classList.add("ocultarbotonfinalizar");
    }
}

    function anterior() {
    transicionocultar();
    setTimeout(function () {
        ocultar(preguntaactual);
        mostrar(preguntaactual - 1)
        preguntaactual--;
    }, 300);
}

    function siguiente() {
    transicionocultar();
    setTimeout(function () {
        ocultar(preguntaactual);
        mostrar(preguntaactual + 1)
        preguntaactual++;
    }, 300);
    obtenerValorSeleccionado(preguntaactual);
}


    function respuesta(pregunta, elegida) {
    respuestas[pregunta] = parseInt(elegida, 10);
}

    function obtenerValorSeleccionado(preguntaIndex) {
    var idFormulario = "formulario" + preguntaIndex;
    var formulario = document.getElementById(idFormulario);
    var opcionesSeleccionadas = formulario.querySelectorAll('input[type="radio"]:checked');

    if (opcionesSeleccionadas.length > 0) {
        var indiceSeleccionado = Array.from(formulario.elements).indexOf(opcionesSeleccionadas[0]);
        respuesta(preguntaIndex, indiceSeleccionado);
    }
}


    function finalizar(){
    obtenerValorSeleccionado(preguntaactual);
    var cajapreguntas = document.getElementById("cajapreguntas");
    cajapreguntas.style.opacity = 0;
    calcularnota();
    
    setTimeout(function () {
        window.scrollTo(0, 0);}, 500);

}

    function calcularnota() {
    for (var i = 0; i < respuestas.length; i++) {
        if (respuestas[i] !== undefined) {
            var opcionseleccionada = respuestas[i];
            nota += parseInt(ods.pregunta[i].respuestas[opcionseleccionada].valor);
            notapregunta[i] = parseInt(ods.pregunta[i].respuestas[opcionseleccionada].valor); //Guardamos la puntuación de cada pregunta para según el valor mostrar o no la recomendación
        }
    }

    var valor = document.getElementById("nota");
    var puntuacion = document.getElementById("puntuacion");
    valor.textContent = "Tu puntuación ha sido de " + nota + " / " + (ods.pregunta.length * 5);

    var palabra;
    if (nota < 75) {
        palabra = "MAL, ESPABILA, 😤";
    } else if (nota <= 100) {
        palabra = "MEJORABLE, CONFIAMOS EN TI, 😢";
    } else if (nota <= 139) {
        palabra = "POR EL BUEN CAMINO, SIGA TRABAJANDO EN ELLO, 👍";
    } else if (nota <= 150) {
        palabra = "EXCELENTE, SIGUE ASÍ, ⭐";
    }

    
    var mostrarpalabra = document.getElementById("palabra");
    mostrarpalabra.textContent = palabra;
    for(i = 0 ; i < ods.pregunta.length ; i++){
        if (notapregunta[i] != 5){
        consejo(i + 1);
    }
    }

    puntuacion.style.display = "block";
    setTimeout(function () {
        puntuacion.style.opacity = 1;
    }, 1000);
}

    function consejo(pregunta) {
    var divconsejo = document.getElementById("divconsejo");
    var div = document.createElement("div");
    var titulo = document.createElement("h1");
    div.appendChild(titulo);
    titulo.textContent = "Consejo para la pregunta " + pregunta;
    div.id = "DIVCONSEJO";
        for ( e = 0; e < ods.relaciones[pregunta].length ; e ++){/* Bucle para cada pregunta */
            var h3 = document.createElement("h3");
            divconsejo.appendChild(div);
            div.appendChild(h3);

       var quemostrar = ods.relaciones[pregunta - 2][e]
        var mostrar = ods.recomendaciones[quemostrar].texto;
        h3.textContent = mostrar;
        }
    }

    function transicionocultar() {
        var div = document.getElementById("divinterior");
        div.style.opacity = 0;
    
        setTimeout(function () {
            div.style.opacity = 1;
        }, 350);
    }


    function ModoOscuro(interruptor) {
        if (interruptor.target.checked) {
            document.body.classList.add('dark-mode');
        } else {
            document.body.classList.remove('dark-mode');
        }
    }


    crearpreguntas(); /* Arrancamos el formulario */
    mostrar(preguntaactual);
    const InterruptorOscuro = document.querySelector('#modoOscuro');
    InterruptorOscuro.addEventListener('change', ModoOscuro);
    